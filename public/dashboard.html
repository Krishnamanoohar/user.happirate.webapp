<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Light Purple Theme</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f5f3ff',   /* Very light lavender */
                            100: '#ede9fe',  /* Light lavender */
                            200: '#ddd6fe',  /* Soft purple */
                            300: '#c4b5fd',  /* Medium light purple */
                            400: '#a78bfa',  /* Light violet */
                            500: '#8b5cf6',  /* Primary purple */
                            600: '#7c3aed',  /* Deep purple */
                            700: '#6d28d9',  /* Dark purple */
                            800: '#5b21b6',  /* Very dark */
                            900: '#4c1d95',  /* Deepest */
                        }
                    },
                    animation: {
                        'slide-in-right': 'slideInRight 0.3s ease-out forwards',
                        'fade-in': 'fadeIn 0.4s ease-out forwards',
                    },
                    keyframes: {
                        slideInRight: {
                            '0%': { transform: 'translateX(100%)', opacity: 0 },
                            '100%': { transform: 'translateX(0)', opacity: 1 },
                        },
                        fadeIn: {
                            '0%': { opacity: 0, transform: 'translateY(10px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #ffffff; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @media print {
            .no-print { display: none !important; }
            body { background-color: white; }
            .print-container { box-shadow: none; border: none; }
        }
        .icon-container { display: inline-flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICON SYSTEM (Properly Sized) ---
        const Icons = {
            CreditCard: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>,
            TrendingUp: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>,
            AlertCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>,
            CheckCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            Clock: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            Shield: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
            ChevronRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>,
            Activity: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>,
            Home: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            DollarSign: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
            PieChart: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>,
            Bell: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>,
            Menu: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>,
            X: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Calendar: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            ArrowLeft: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>,
            Info: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            Sparkles: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>,
            Send: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>,
            FileText: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg>,
            Mail: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>,
            Share2: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>,
            Download: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
        };

        const Icon = ({ name, className = "w-5 h-5" }) => {
            const IconComponent = Icons[name];
            return IconComponent ? <span className={`inline-flex items-center justify-center ${className}`}><IconComponent /></span> : null;
        };

        const apiResponse = {
            customer: {
                name: "Arun Baikani",
                score: 737,
                lastUpdated: "26 Jan 2026",
                nextUpdate: "26 Feb 2026"
            },
            factors: {
                paymentHistory: { status: "Excellent", percentage: 100, impact: "High", color: "text-brand-600" },
                creditUtilization: { status: "Poor", percentage: 97, impact: "High", color: "text-red-600" },
                creditAge: { status: "Good", age: "5 Yrs 6 Mos", impact: "Medium", color: "text-brand-600" },
                totalAccounts: { status: "Good", count: 6, impact: "Low", color: "text-brand-600" },
                inquiries: { status: "Fair", count: 18, impact: "Medium", color: "text-orange-500" }
            },
            accounts: [
                {
                    id: 1,
                    bank: "AXIS BANK",
                    type: "Credit Card",
                    accountNumber: "...8676",
                    balance: 38095,
                    limit: 39000,
                    status: "Active",
                    dateOpened: "09 Dec 2025",
                    lastPaymentDate: "01 Jan 2026",
                    iconName: "CreditCard",
                    alert: "High Utilization (97%)",
                    paymentHistory: [0, 0, 0, 0, 0, 0], 
                    isLoan: false
                },
                {
                    id: 2,
                    bank: "APTUS",
                    type: "Housing Loan",
                    accountNumber: "...9677",
                    balance: 737712,
                    limit: 1052305, 
                    roi: "17.00%",
                    emi: "₹18,289",
                    tenure: "120 Months",
                    dateOpened: "31 Dec 2020",
                    lastPaymentDate: "10 Jan 2026",
                    status: "Active",
                    iconName: "Home",
                    alert: "High Interest Rate",
                    paymentHistory: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 'XXX', 0], 
                    isLoan: true
                },
                {
                    id: 3,
                    bank: "HDFC BANK",
                    type: "Personal Loan",
                    accountNumber: "...3075",
                    balance: 469495,
                    limit: 575000,
                    roi: "11.5%", 
                    emi: "₹12,756",
                    dateOpened: "13 Nov 2024",
                    lastPaymentDate: "07 Jan 2026",
                    status: "Active",
                    iconName: "DollarSign",
                    paymentHistory: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    isLoan: true
                },
                {
                    id: 4,
                    bank: "TGB",
                    type: "Consumer Loan",
                    accountNumber: "...1192",
                    balance: 89975,
                    limit: 90000,
                    status: "Active",
                    roi: "7.00%", 
                    emi: "₹2,500", 
                    dateOpened: "10 Jun 2020",
                    lastPaymentDate: "14 Nov 2025",
                    iconName: "Activity",
                    paymentHistory: ['STD', 'STD', 'STD', 'STD', 'STD', 'STD', 'STD', 'XXX', 'STD', 'STD', 'STD', 'STD'],
                    isLoan: true
                }
            ],
            offers: [
                {
                    id: 1,
                    title: "Reduce your Home Loan EMI",
                    description: "Transfer your Aptus loan (17%) to HDFC at 8.75%. Save ₹2.5 Lakhs.",
                    action: "Check Eligibility",
                    tag: "High Savings",
                    color: "bg-white border border-brand-100"
                },
                {
                    id: 2,
                    title: "Credit Card Upgrade",
                    description: "Your Axis card utilization is high. Get a OneCard with ₹2L limit.",
                    action: "Apply Now",
                    tag: "Score Booster",
                    color: "bg-white border border-brand-100"
                }
            ]
        };

        const callGeminiAPI = async (prompt, contextData) => {
            const contextString = JSON.stringify(contextData);
            const systemPrompt = `You are a friendly, expert financial advisor for a user named Arun. You have access to their credit report summary JSON: ${contextString}. Guidelines: 1. Be concise. 2. Use the data! 3. Highlight 97% utilization on Axis Bank. 4. Highlight 17% interest on Aptus Home Loan.`;
            
            try {
                await new Promise(r => setTimeout(r, 1500));
                
                if (prompt.includes("increase my score")) {
                    return "To increase your score (currently **737**), the biggest win is paying down your **Axis Bank Credit Card**. You are using **97%** of your limit! Bringing this below 30% could boost your score by 20-30 points immediately.";
                }
                if (prompt.includes("Axis")) {
                    return "Your **Axis Bank Credit Card** has a balance of **₹38,095** against a limit of ₹39,000. This **97% utilization** is hurting your score significantly. I recommend paying off at least ₹25,000 as soon as possible.";
                }
                if (prompt.includes("housing")) {
                    return "Your **Aptus Housing Loan** has a balance of **₹7.37 Lakhs** at an interest rate of **17.00%**. This is very high! HDFC or SBI currently offer rates around 8.5%. A balance transfer could save you significant money on interest.";
                }
                
                return "I've analyzed your credit profile. Your score is **737**. You have high credit card utilization (97%) which is the main factor holding you back. How else can I assist?";

            } catch (error) {
                return "I'm having trouble connecting. Please try again.";
            }
        };

        const FinancialAssistant = ({ onClose }) => {
            const [messages, setMessages] = useState([
                { role: 'assistant', text: "Hi Arun! I'm your AI credit assistant. ✨ I've analyzed your report. How can I help you save money or improve your score today?" }
            ]);
            const [input, setInput] = useState("");
            const [isLoading, setIsLoading] = useState(false);
            const messagesEndRef = useRef(null);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [messages]);

            const handleSend = async (textOverride = null) => {
                const textToSend = textOverride || input;
                if (!textToSend.trim()) return;

                setMessages(prev => [...prev, { role: 'user', text: textToSend }]);
                setInput("");
                setIsLoading(true);

                const response = await callGeminiAPI(textToSend, apiResponse);

                setMessages(prev => [...prev, { role: 'assistant', text: response }]);
                setIsLoading(false);
            };

            const QuickPrompt = ({ text }) => (
                <button onClick={() => handleSend(text)} className="bg-brand-50 border border-brand-200 text-brand-700 text-xs px-3 py-1.5 rounded-full hover:bg-brand-100 transition-colors whitespace-nowrap font-medium">{text}</button>
            );

            return (
                <div className="fixed inset-y-0 right-0 w-full md:w-[400px] bg-white shadow-2xl z-[60] flex flex-col animate-slide-in-right border-l border-gray-200 text-slate-800">
                    <div className="p-4 border-b border-gray-100 flex justify-between items-center bg-white">
                        <div className="flex items-center space-x-3">
                            <div className="w-8 h-8 rounded-full bg-gradient-to-tr from-brand-500 to-brand-600 flex items-center justify-center">
                                <Icon name="Sparkles" className="w-4 h-4 text-white" />
                            </div>
                            <div>
                                <h3 className="font-bold text-slate-900 text-sm">FinAI Assistant</h3>
                                <p className="text-xs text-green-600 flex items-center"><span className="w-1.5 h-1.5 bg-green-500 rounded-full mr-1"></span> Online</p>
                            </div>
                        </div>
                        <button onClick={onClose} className="p-2 hover:bg-gray-50 rounded-full text-slate-400 transition-colors"><Icon name="X" className="w-5 h-5" /></button>
                    </div>
                    <div className="flex-1 overflow-y-auto p-4 bg-gray-50">
                        {messages.map((msg, idx) => (
                            <div key={idx} className={`flex mb-4 ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                <div className={`max-w-[80%] rounded-2xl p-3 text-sm ${msg.role === 'user' ? 'bg-brand-600 text-white rounded-br-none' : 'bg-white border border-gray-200 text-slate-700 rounded-bl-none shadow-sm'}`}>
                                    {msg.text.split('\n').map((line, i) => <p key={i} className={i > 0 ? 'mt-2' : ''} dangerouslySetInnerHTML={{ __html: line.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') }} />)}
                                </div>
                            </div>
                        ))}
                        {isLoading && <div className="flex justify-start mb-4"><div className="bg-white border border-gray-200 rounded-2xl rounded-bl-none p-3 shadow-sm flex items-center space-x-2"><div className="w-2 h-2 bg-brand-500 rounded-full animate-bounce"></div><div className="w-2 h-2 bg-brand-500 rounded-full animate-bounce delay-75"></div><div className="w-2 h-2 bg-brand-500 rounded-full animate-bounce delay-150"></div></div></div>}
                        <div ref={messagesEndRef} />
                    </div>
                    <div className="p-3 bg-white border-t border-gray-100 flex gap-2 overflow-x-auto no-scrollbar">
                        <QuickPrompt text="How do I increase my score?" />
                        <QuickPrompt text="Analyze my Axis Bank card" />
                        <QuickPrompt text="Why is my housing loan flagged?" />
                    </div>
                    <div className="p-4 bg-white border-t border-gray-100">
                        <div className="flex items-center space-x-2 bg-gray-50 rounded-full px-4 py-2 border border-gray-200 focus-within:border-brand-500 focus-within:ring-1 focus-within:ring-brand-500 transition-all">
                            <input type="text" value={input} onChange={(e) => setInput(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleSend()} placeholder="Ask anything about your finances..." className="flex-1 bg-transparent outline-none text-sm text-slate-900 placeholder-gray-400" />
                            <button onClick={() => handleSend()} disabled={isLoading || !input.trim()} className="p-1.5 bg-brand-600 rounded-full text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-700 transition-colors"><Icon name="Send" className="w-4 h-4" /></button>
                        </div>
                    </div>
                </div>
            );
        };

        const ReportView = () => {
            const [isDownloading, setIsDownloading] = useState(false);

            const handleDownload = () => {
                setIsDownloading(true);
                const element = document.getElementById('report-content');
                
                if (typeof html2pdf !== 'undefined') {
                    const opt = {
                        margin: [0.5, 0.5],
                        filename: `Credit_Report_${apiResponse.customer.name.replace(/\s+/g, '_')}.pdf`,
                        image: { type: 'jpeg', quality: 0.98 },
                        html2canvas: { scale: 2, useCORS: true },
                        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
                    };
                    
                    html2pdf().set(opt).from(element).save()
                        .then(() => setIsDownloading(false))
                        .catch(() => {
                            setIsDownloading(false);
                            window.print();
                        });
                } else {
                    window.print();
                    setIsDownloading(false);
                }
            };

            return (
                <div className="animate-fade-in max-w-4xl mx-auto">
                    <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4 no-print">
                        <div>
                            <h1 className="text-2xl font-bold text-slate-900">Professional Credit Report</h1>
                            <p className="text-slate-500 text-sm mt-1">Comprehensive financial analysis for {apiResponse.customer.name}</p>
                        </div>
                        <div className="flex gap-2">
                            <button className="flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                                <Icon name="Share2" className="w-4 h-4" /> WhatsApp
                            </button>
                            <button className="flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors">
                                <Icon name="Mail" className="w-4 h-4" /> Gmail
                            </button>
                            <button onClick={handleDownload} disabled={isDownloading} className="flex items-center gap-2 bg-slate-900 hover:bg-slate-800 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors disabled:opacity-70 disabled:cursor-wait">
                                <Icon name="Download" className="w-4 h-4" /> 
                                {isDownloading ? 'Downloading...' : 'PDF'}
                            </button>
                        </div>
                    </div>

                    <div id="report-content" className="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 print-container relative overflow-hidden">
                        <div className="relative z-10">
                            {/* Report Header - Clean & Aligned */}
                            <div className="border-b-2 border-brand-100 pb-6 mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                                <div className="flex items-center gap-3">
                                    <div className="w-10 h-10 bg-brand-100 rounded-lg flex items-center justify-center">
                                        <Icon name="FileText" className="w-6 h-6 text-brand-600" />
                                    </div>
                                    <div>
                                        <div className="text-xl font-bold text-slate-900">Credit Report</div>
                                        <div className="text-xs text-slate-500">Generated: {new Date().toLocaleDateString()}</div>
                                    </div>
                                </div>
                                <div className="text-left md:text-right">
                                    <div className="text-lg font-bold text-slate-900">{apiResponse.customer.name}</div>
                                    <div className="text-xs text-slate-500">ID: #USER-8923-AB</div>
                                </div>
                            </div>

                            {/* Executive Summary - Grid Aligned */}
                            <div className="mb-8">
                                <h2 className="text-base font-bold text-slate-900 mb-4 flex items-center gap-2">
                                    <span className="w-1 h-5 bg-brand-500 rounded-full"></span>
                                    Executive Summary
                                </h2>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div className="bg-brand-50 p-4 rounded-xl border border-brand-100">
                                        <div className="text-xs text-slate-500 mb-1 uppercase tracking-wider">CIBIL Score</div>
                                        <div className="text-3xl font-bold text-brand-600">{apiResponse.customer.score}</div>
                                        <div className="text-xs text-green-600 font-medium mt-1">Top 25% of borrowers</div>
                                    </div>
                                    <div className="bg-gray-50 p-4 rounded-xl border border-gray-100">
                                        <div className="text-xs text-slate-500 mb-1 uppercase tracking-wider">Total Debt</div>
                                        <div className="text-3xl font-bold text-slate-900">₹12.45L</div>
                                        <div className="text-xs text-slate-500 mt-1">Across 4 active accounts</div>
                                    </div>
                                    <div className="bg-gray-50 p-4 rounded-xl border border-gray-100">
                                        <div className="text-xs text-slate-500 mb-1 uppercase tracking-wider">Credit Health</div>
                                        <div className="text-3xl font-bold text-orange-500">Fair</div>
                                        <div className="text-xs text-slate-500 mt-1">Needs attention on utilization</div>
                                    </div>
                                </div>
                            </div>

                            {/* Key Insights - Aligned */}
                            <div className="mb-8">
                                <h2 className="text-base font-bold text-slate-900 mb-4 flex items-center gap-2">
                                    <span className="w-1 h-5 bg-brand-500 rounded-full"></span>
                                    Credit Factors Analysis
                                </h2>
                                <div className="space-y-3">
                                    <div className="flex items-start gap-3 p-4 bg-red-50 rounded-xl border border-red-100">
                                        <div className="mt-0.5 flex-shrink-0"><Icon name="AlertCircle" className="w-5 h-5 text-red-600" /></div>
                                        <div className="flex-1">
                                            <h3 className="font-semibold text-slate-900 text-sm">High Credit Utilization (Critical)</h3>
                                            <p className="text-sm text-slate-600 mt-1 leading-relaxed">
                                                Your Axis Bank Credit Card utilization is at <span className="font-bold text-red-600">97%</span> (₹38,095 / ₹39,000). 
                                                This is the primary factor suppressing your score. Recommended utilization is below 30%.
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div className="flex items-start gap-3 p-4 bg-green-50 rounded-xl border border-green-100">
                                        <div className="mt-0.5 flex-shrink-0"><Icon name="CheckCircle" className="w-5 h-5 text-green-600" /></div>
                                        <div className="flex-1">
                                            <h3 className="font-semibold text-slate-900 text-sm">Excellent Payment History</h3>
                                            <p className="text-sm text-slate-600 mt-1 leading-relaxed">
                                                You have a <span className="font-bold text-green-600">100%</span> on-time payment record across all active loans and credit cards. 
                                                This is a strong foundation for future credit approvals.
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div className="flex items-start gap-3 p-4 bg-brand-50 rounded-xl border border-brand-100">
                                        <div className="mt-0.5 flex-shrink-0"><Icon name="Info" className="w-5 h-5 text-brand-600" /></div>
                                        <div className="flex-1">
                                            <h3 className="font-semibold text-slate-900 text-sm">Loan Portfolio Mix</h3>
                                            <p className="text-sm text-slate-600 mt-1 leading-relaxed">
                                                You have a healthy mix of secured (Housing Loan) and unsecured (Personal Loan, Credit Card) credit. 
                                                However, the interest rate on your Aptus Housing Loan (<span className="font-bold">17%</span>) is significantly above market average.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Action Plan */}
                            <div className="mb-8">
                                <h2 className="text-base font-bold text-slate-900 mb-4 flex items-center gap-2">
                                    <span className="w-1 h-5 bg-brand-500 rounded-full"></span>
                                    Recommended Action Plan
                                </h2>
                                <div className="bg-gray-50 rounded-xl p-5 border border-gray-200">
                                    <ul className="space-y-3 text-slate-700 text-sm">
                                        <li className="flex items-start gap-2">
                                            <span className="w-1.5 h-1.5 bg-brand-500 rounded-full mt-2 flex-shrink-0"></span>
                                            <span><strong>Immediate:</strong> Pay down at least ₹25,000 on your Axis Bank credit card to reduce utilization below 30%.</span>
                                        </li>
                                        <li className="flex items-start gap-2">
                                            <span className="w-1.5 h-1.5 bg-brand-500 rounded-full mt-2 flex-shrink-0"></span>
                                            <span><strong>Short Term:</strong> Apply for a Housing Loan Balance Transfer. Switching to a bank like HDFC or SBI could lower your rate from 17% to ~8.50%.</span>
                                        </li>
                                        <li className="flex items-start gap-2">
                                            <span className="w-1.5 h-1.5 bg-brand-500 rounded-full mt-2 flex-shrink-0"></span>
                                            <span><strong>Monitoring:</strong> Avoid new credit inquiries for the next 3 months to let your score recover.</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            {/* Footer */}
                            <div className="mt-12 pt-6 border-t border-gray-200 text-center text-xs text-slate-400">
                                <p>This report is generated by Financial Services. Data is based on the latest CIBIL fetch.</p>
                                <p className="mt-1">Confidential • For Personal Use Only</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
 const ScoreGauge = ({ score }) => {
  const radius = 70;
  const stroke = 10;
  const normalizedRadius = radius - stroke * 2;
  const circumference = normalizedRadius * 2 * Math.PI;
  const strokeDashoffset =
    circumference - ((score - 300) / 600) * circumference;

  return (
    <div className="relative flex flex-col items-center justify-center p-6 bg-gradient-to-br from-brand-600 to-brand-800 rounded-3xl shadow-xl text-white">
      <div className="relative">
        <svg height={radius * 2} width={radius * 2} className="transform -rotate-90">
          
          {/* Glow filter */}
          <defs>
            <filter id="whiteGlow">
              <feGaussianBlur stdDeviation="3" result="coloredBlur" />
              <feMerge>
                <feMergeNode in="coloredBlur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
          </defs>

          {/* Background ring */}
          <circle
            stroke="rgba(255,255,255,0.2)"
            strokeWidth={stroke}
            fill="transparent"
            r={normalizedRadius}
            cx={radius}
            cy={radius}
            strokeLinecap="round"
          />

          {/* Active ring with glow */}
          <circle
            stroke="white"
            strokeWidth={stroke}
            strokeDasharray={`${circumference} ${circumference}`}
            style={{
              strokeDashoffset,
              transition: "stroke-dashoffset 1s ease-in-out"
            }}
            fill="transparent"
            r={normalizedRadius}
            cx={radius}
            cy={radius}
            strokeLinecap="round"
            filter="url(#whiteGlow)"
          />
        </svg>

        <div className="absolute inset-0 flex flex-col items-center justify-center">
          <span className="text-3xl font-bold drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]">
            {score}
          </span>
          <span className="text-[10px] uppercase tracking-wider opacity-80 mt-0.5">
            CIBIL Score
          </span>
        </div>
      </div>

      <div className="mt-4 text-center">
        <p className="text-white/80 text-xs">
          Last updated: {apiResponse.customer.lastUpdated}
        </p>
        <div className="flex items-center justify-center mt-2 space-x-2">
          <div className="px-2 py-1 bg-white/20 text-white text-[10px] rounded-full border border-white/30 flex items-center">
            <Icon name="TrendingUp" className="w-3 h-3 mr-1" /> Top 25%
          </div>
        </div>
      </div>
    </div>
  );
};


        const FactorCard = ({ title, status, value, color, iconName, onClick }) => (
            <div onClick={onClick} className="bg-white p-4 rounded-xl border border-brand-100 shadow-sm flex items-center justify-between hover:shadow-md hover:border-brand-200 transition-all cursor-pointer group">
                <div className="flex items-center space-x-3">
                    <div className="p-2 rounded-lg bg-brand-50 group-hover:bg-brand-100 transition-colors text-brand-600 flex-shrink-0">
                        <Icon name={iconName} className="w-5 h-5" />
                    </div>
                    <div className="min-w-0">
                        <p className="text-slate-500 text-xs uppercase tracking-wide truncate">{title}</p>
                        <p className={`font-semibold text-sm ${color} mt-0.5`}>{status}</p>
                    </div>
                </div>
                <div className="text-right flex-shrink-0 ml-2">
                    <p className="text-slate-900 font-bold text-sm">{value}</p>
                    <Icon name="ChevronRight" className="w-4 h-4 text-slate-400 ml-auto mt-0.5" />
                </div>
            </div>
        );

        const FactorDetailView = ({ factorKey, data, onBack }) => {
            const factorContent = {
                paymentHistory: { title: "Payment History", desc: "Payment history accounts for 35% of your credit score. It shows whether you've made your past credit payments on time.", tip: "Always pay at least the minimum amount due on time to keep this factor green.", iconName: "CheckCircle" },
                creditUtilization: { title: "Credit Utilization", desc: "This accounts for 30% of your score. It is the ratio of your outstanding credit card balances to your total credit card limits.", tip: "A utilization ratio above 30% signals high risk to lenders. Try to pay down balances.", iconName: "PieChart" },
                creditAge: { title: "Age of Accounts", desc: "This accounts for 15% of your score. It averages the age of your open credit accounts.", tip: "Avoid closing old credit cards, as they help increase your average credit age.", iconName: "Clock" },
                totalAccounts: { title: "Total Accounts", desc: "This makes up 10% of your score. It looks at the total number of open and closed accounts.", tip: "A healthy mix of secured (loans) and unsecured (cards) credit is beneficial.", iconName: "CreditCard" },
                inquiries: { title: "Hard Inquiries", desc: "This accounts for 10% of your score. Hard inquiries occur when a lender checks your credit for a new application.", tip: "Limit new credit applications. Multiple inquiries in a short time can lower your score.", iconName: "Activity" }
            };

            const content = factorContent[factorKey];
            const displayValue = data.percentage ? `${data.percentage}%` : (data.age || data.count);

            return (
                <div className="animate-fade-in">
                    <div className="flex items-center space-x-3 mb-6">
                        <button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-full transition-colors border border-gray-200">
                            <Icon name="ArrowLeft" className="w-5 h-5 text-slate-600" />
                        </button>
                        <h1 className="text-xl font-bold text-slate-900">{content.title}</h1>
                    </div>

                    <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mb-6">
                        <div className="flex items-start justify-between">
                            <div>
                                <p className="text-slate-500 text-xs mb-1 uppercase tracking-wide">Status</p>
                                <h2 className={`text-3xl font-bold ${data.color}`}>{data.status}</h2> 
                            </div>
                            <div className="p-3 bg-brand-50 rounded-xl border border-brand-100 text-brand-600">
                                <Icon name={content.iconName} className="w-6 h-6" />
                            </div>
                        </div>
                        <div className="mt-6 pt-6 border-t border-gray-100">
                            <p className="text-slate-900 font-bold text-2xl">{displayValue}</p>
                            <p className="text-slate-500 text-xs mt-1 uppercase tracking-wide">Current Value</p>
                        </div>
                    </div>

                    <div className="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm mb-6">
                        <h3 className="font-bold text-slate-900 mb-3 text-sm">What does this mean?</h3>
                        <p className="text-slate-600 text-sm leading-relaxed">{content.desc}</p>
                    </div>

                    <div className="bg-brand-50 p-4 rounded-xl border border-brand-100 flex gap-3">
                        <div className="flex-shrink-0 mt-0.5"><Icon name="Sparkles" className="w-5 h-5 text-brand-600" /></div>
                        <div>
                            <h4 className="font-bold text-brand-900 text-sm">Pro Tip</h4>
                            <p className="text-brand-700 text-xs mt-1 leading-relaxed">{content.tip}</p>
                        </div>
                    </div>
                </div>
            );
        };

        const AccountItem = ({ account, onClick }) => {
            const utilization = account.limit ? Math.min((account.balance / account.limit) * 100, 100) : 0;
            const isHighUtil = utilization > 50;
            
            return (
                <div onClick={() => onClick(account)} className="group bg-white border border-brand-100 rounded-2xl p-5 mb-4 cursor-pointer transition-all duration-300 hover:border-brand-300 hover:shadow-md hover:-translate-y-0.5">
                    <div className="flex items-start justify-between mb-4">
                        <div className="flex items-center space-x-4">
                            <div className="p-3 rounded-xl bg-brand-50 border border-brand-100 text-brand-600 group-hover:bg-brand-100 transition-colors flex-shrink-0">
                                <Icon name={account.iconName} className="w-6 h-6" />
                            </div>
                            <div className="min-w-0">
                                <h4 className="text-base font-bold text-slate-900 truncate">{account.bank}</h4>
                                <div className="flex items-center space-x-2 mt-1">
                                    <span className="text-xs text-slate-500 font-medium bg-slate-100 px-2 py-0.5 rounded">{account.type}</span>
                                    <span className="text-xs text-slate-400 font-mono">{account.accountNumber}</span>
                                </div>
                            </div>
                        </div>
                        <div className="text-right flex-shrink-0 ml-2">
                            <span className="text-xs text-slate-500 uppercase tracking-wider block mb-0.5">Balance</span>
                            <span className="text-lg font-bold text-slate-900">₹{account.balance.toLocaleString()}</span>
                        </div>
                    </div>
                    
                    <div className="flex items-center justify-between pt-4 border-t border-slate-50">
                        <div className="flex items-center space-x-2">
                            {account.alert ? (
                                <div className={`flex items-center space-x-1.5 px-2.5 py-1 rounded-full border ${account.alert.includes('Interest') || isHighUtil ? 'bg-red-50 border-red-200 text-red-600' : 'bg-yellow-50 border-yellow-200 text-yellow-600'}`}>
                                    <Icon name="AlertCircle" className="w-3.5 h-3.5 flex-shrink-0" />
                                    <span className="text-xs font-semibold truncate max-w-[150px] sm:max-w-[200px]">{account.alert}</span>
                                </div>
                            ) : (
                                <div className="flex items-center space-x-1.5 px-2.5 py-1 rounded-full bg-green-50 border border-green-200 text-green-600">
                                    <Icon name="CheckCircle" className="w-3.5 h-3.5" />
                                    <span className="text-xs font-semibold">Healthy</span>
                                </div>
                            )}
                            {account.roi && (
                                <div className="px-2.5 py-1 rounded-full bg-slate-100 border border-slate-200 text-slate-600">
                                    <span className="text-xs font-medium">{account.roi}</span>
                                </div>
                            )}
                        </div>
                        
                        <div className="flex items-center">
                            {account.limit && !account.isLoan ? (
                                <div className="flex flex-col items-end w-28">
                                    <div className="flex justify-between w-full text-[10px] text-slate-500 mb-1 font-medium">
                                        <span>Used</span>
                                        <span className={isHighUtil ? 'text-red-500' : 'text-brand-600'}>{Math.round(utilization)}%</span>
                                    </div>
                                    <div className="w-full h-1.5 bg-slate-100 rounded-full overflow-hidden">
                                        <div className={`h-full rounded-full transition-all duration-1000 ${isHighUtil ? 'bg-red-500' : 'bg-brand-500'}`} style={{ width: `${utilization}%` }}></div>
                                    </div>
                                </div>
                            ) : (
                                <span className="text-[10px] uppercase tracking-wider text-slate-500 bg-slate-100 px-2 py-1 rounded border border-slate-200">Active Loan</span>
                            )}
                            <Icon name="ChevronRight" className="w-5 h-5 text-slate-300 ml-3 group-hover:text-brand-500 transition-colors" />
                        </div>
                    </div>
                </div>
            );
        };

        const OfferCard = ({ offer }) => (
            <div className={`relative overflow-hidden rounded-2xl p-5 mb-4 ${offer.color} shadow-sm transform transition hover:shadow-md`}>
                <div className="absolute top-0 right-0 p-3 opacity-[0.03] pointer-events-none">
                    <Icon name="DollarSign" className="w-24 h-24 text-brand-900" />
                </div>
                <div className="relative z-10">
                    <div className="inline-block px-2 py-1 bg-brand-100 rounded text-xs font-bold text-brand-700 mb-2 border border-brand-200">{offer.tag}</div>
                    <h3 className="text-lg font-bold text-slate-900 mb-1">{offer.title}</h3>
                    <p className="text-slate-600 text-sm mb-4 max-w-[90%] leading-relaxed">{offer.description}</p>
                    <button className="bg-slate-900 text-white px-4 py-2 rounded-lg font-semibold text-sm hover:bg-slate-800 transition-colors shadow-sm">{offer.action}</button>
                </div>
            </div>
        );

        const AccountDetailView = ({ account, onBack }) => {
            const utilization = Math.min((account.balance / account.limit) * 100, 100);
            const progressColor = utilization > 90 ? 'bg-red-500' : utilization > 50 ? 'bg-yellow-500' : 'bg-brand-500';

            return (
                <div className="animate-fade-in">
                    <div className="flex items-center space-x-3 mb-6">
                        <button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-full transition-colors border border-gray-200">
                            <Icon name="ArrowLeft" className="w-5 h-5 text-slate-600" />
                        </button>
                        <h1 className="text-xl font-bold text-slate-900 truncate">{account.bank}</h1>
                    </div>
                    
                    <div className="bg-white rounded-2xl p-6 border border-gray-200 shadow-sm mb-6">
                        <div className="flex items-start justify-between mb-6">
                            <div>
                                <div className="flex items-center space-x-2 mb-1">
                                    <span className="text-xs text-slate-500 uppercase tracking-wider">{account.type}</span>
                                </div>
                                <h2 className="text-3xl font-bold text-slate-900">₹{account.balance.toLocaleString()}</h2>
                                <p className="text-xs text-slate-500 mt-1">Current Balance</p>
                            </div>
                            <div className="p-3 bg-brand-50 rounded-xl border border-brand-100 text-brand-600">
                                <Icon name={account.iconName} className="w-6 h-6" />
                            </div>
                        </div>
                        
                        <div className="space-y-4">
                            <div>
                                <div className="flex justify-between text-xs text-slate-500 mb-2 font-medium">
                                    <span>{account.isLoan ? "Principal Repaid" : "Used Limit"}</span>
                                    <span>{Math.round(utilization)}%</span>
                                </div>
                                <div className="h-2 bg-slate-100 rounded-full overflow-hidden">
                                    <div className={`h-full ${progressColor} rounded-full transition-all duration-500`} style={{ width: `${utilization}%` }}></div>
                                </div>
                                <div className="flex justify-between text-[10px] text-slate-400 mt-1.5">
                                    <span>₹0</span>
                                    <span>Limit: ₹{account.limit.toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-2 gap-3 mb-6">
                        <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                            <p className="text-slate-500 text-xs mb-1.5 uppercase tracking-wider">Interest Rate</p>
                            <p className="text-slate-900 font-bold">{account.roi || "N/A"}</p>
                        </div>
                        <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                            <p className="text-slate-500 text-xs mb-1.5 uppercase tracking-wider">Monthly EMI</p>
                            <p className="text-slate-900 font-bold">{account.emi || "N/A"}</p>
                        </div>
                        <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                            <p className="text-slate-500 text-xs mb-1.5 uppercase tracking-wider">Date Opened</p>
                            <div className="flex items-center text-slate-900 font-semibold text-sm">
                                <Icon name="Calendar" className="w-4 h-4 text-brand-600 mr-1.5" />
                                {account.dateOpened}
                            </div>
                        </div>
                        <div className="bg-white p-4 rounded-xl border border-gray-100 shadow-sm">
                            <p className="text-slate-500 text-xs mb-1.5 uppercase tracking-wider">Last Payment</p>
                            <div className="flex items-center text-slate-900 font-semibold text-sm">
                                <Icon name="Clock" className="w-4 h-4 text-brand-600 mr-1.5" />
                                {account.lastPaymentDate}
                            </div>
                        </div>
                    </div>

                    <div className="bg-white rounded-xl p-5 border border-gray-200 shadow-sm mb-6">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-slate-900 font-bold text-sm flex items-center gap-2">
                                <Icon name="Activity" className="w-4 h-4 text-brand-600" />
                                Payment History
                            </h3>
                            <span className="text-xs text-green-700 bg-green-50 px-2 py-1 rounded border border-green-200 font-medium">12 Months</span>
                        </div>
                        <div className="flex justify-between items-center px-1 mb-2">
                            {account.paymentHistory.map((status, index) => (
                                <div key={index} className="flex flex-col items-center group relative">
                                    <div className={`w-2.5 h-2.5 rounded-full mb-1.5 ${status === 0 || status === 'STD' ? 'bg-green-500' : status === 'XXX' ? 'bg-gray-300' : 'bg-red-500'}`}></div>
                                    <div className="absolute -top-8 bg-slate-800 text-[10px] text-white px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10">
                                        {status === 0 || status === 'STD' ? 'On Time' : status === 'XXX' ? 'Unknown' : 'Delayed'}
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="flex justify-between text-[10px] text-slate-400 uppercase tracking-wider px-0.5">
                            <span>Dec</span>
                            <span>Nov</span>
                            <span>Oct</span>
                            <span>Sep</span>
                            <span>Aug</span>
                            <span>Jul</span>
                            <span>Jun</span>
                            <span>May</span>
                            <span>Apr</span>
                            <span>Mar</span>
                            <span>Feb</span>
                            <span>Jan</span>
                        </div>
                    </div>
                    
                    {account.alert && (
                        <div className="bg-red-50 border border-red-100 rounded-xl p-4 flex items-start space-x-3">
                            <div className="flex-shrink-0 mt-0.5">
                                <Icon name="Info" className="w-5 h-5 text-red-500" />
                            </div>
                            <div>
                                <h4 className="text-red-800 font-bold text-sm mb-1">Attention Needed</h4>
                                <p className="text-red-600 text-xs leading-relaxed">
                                    This account has a {account.alert.toLowerCase()}. {account.isLoan ? "Consider a balance transfer to save on interest." : "Try to keep utilization below 30% to improve your credit score."}
                                </p>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const OneScoreDashboard = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [selectedAccount, setSelectedAccount] = useState(null);
            const [selectedFactor, setSelectedFactor] = useState(null);
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
            const [isAiOpen, setIsAiOpen] = useState(false);

            const handleTabChange = (tab) => {
                setActiveTab(tab);
                setSelectedAccount(null);
                setSelectedFactor(null);
                setIsMobileMenuOpen(false);
            };

            return (
                <div className="min-h-screen bg-white text-slate-900 font-sans selection:bg-brand-50 selection:text-brand-900">
                    <header className="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100 shadow-sm">
                        <div className="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center">
                                <img 
                                    src="https://placehold.co/40x40/8b5cf6/ffffff?text=H" 
                                    alt="Logo" 
                                    className="h-8 w-8 rounded-lg object-cover shadow-sm"
                                    onError={(e) => {e.target.src = "https://placehold.co/40x40/8b5cf6/ffffff?text=H";}}
                                />
                            </div>
                            
                            <nav className="hidden md:flex items-center space-x-1">
                                {['dashboard', 'accounts', 'offers', 'report'].map((tab) => (
                                    <button 
                                        key={tab} 
                                        onClick={() => handleTabChange(tab)}
                                        className={`px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all ${activeTab === tab ? 'bg-brand-50 text-brand-700' : 'text-slate-500 hover:bg-gray-50 hover:text-slate-900'}`}
                                    >
                                        {tab}
                                    </button>
                                ))}
                            </nav>

                            <div className="flex items-center space-x-3">
                                <button className="relative p-2 text-slate-500 hover:bg-gray-100 rounded-full transition-colors">
                                    <Icon name="Bell" className="w-5 h-5" />
                                    <span className="absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border-2 border-white"></span>
                                </button>
                                <div className="w-8 h-8 rounded-full bg-brand-100 border border-brand-200 flex items-center justify-center text-sm font-bold text-brand-700">
                                    AB
                                </div>
                                <button 
                                    className="md:hidden p-2 text-slate-600 hover:bg-gray-100 rounded-lg transition-colors" 
                                    onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
                                >
                                    <Icon name={isMobileMenuOpen ? "X" : "Menu"} className="w-6 h-6" />
                                </button>
                            </div>
                        </div>
                    </header>

                    {isMobileMenuOpen && (
                        <div className="md:hidden bg-white border-b border-gray-100 p-2 shadow-lg">
                            <div className="flex flex-col space-y-1">
                                {['dashboard', 'accounts', 'offers', 'report'].map((tab) => (
                                    <button 
                                        key={tab} 
                                        onClick={() => handleTabChange(tab)}
                                        className={`px-4 py-3 rounded-lg text-sm font-medium capitalize text-left transition-colors ${activeTab === tab ? 'bg-brand-50 text-brand-700' : 'text-slate-600 hover:bg-gray-50'}`}
                                    >
                                        {tab}
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}

                    <main className="max-w-4xl mx-auto px-4 py-6 pb-24">
                        {activeTab === 'dashboard' && !selectedAccount && !selectedFactor && (
                            <div className="animate-fade-in">
                                <div className="mb-6">
                                    <h1 className="text-2xl font-bold text-slate-900">Hello, {apiResponse.customer.name}</h1>
                                    <p className="text-slate-500 text-sm mt-1">Here is your financial health overview.</p>
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <ScoreGauge score={apiResponse.customer.score} />
                                    <div className="flex flex-col space-y-3">
                                        <div className="bg-white p-4 rounded-xl border border-brand-100 shadow-sm flex-1 flex flex-col justify-center">
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="p-1.5 bg-red-100 rounded-lg text-red-600">
                                                    <Icon name="AlertCircle" className="w-4 h-4" />
                                                </div>
                                                <h3 className="text-slate-900 font-semibold text-sm">Action Required</h3>
                                            </div>
                                            <p className="text-slate-600 text-xs leading-relaxed mb-2">
                                                Your credit utilization on <span className="font-semibold">Axis Bank</span> is <span className="font-bold text-red-600">97%</span>. High utilization negatively impacts your score.
                                            </p>
                                            <button className="text-xs text-brand-600 font-semibold hover:text-brand-700 flex items-center mt-auto">
                                                View Tips <Icon name="ChevronRight" className="w-3 h-3 ml-0.5" />
                                            </button>
                                        </div>
                                        <div className="bg-white p-4 rounded-xl border border-brand-100 shadow-sm flex-1 flex flex-col justify-center">
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className="p-1.5 bg-green-100 rounded-lg text-green-600">
                                                    <Icon name="TrendingUp" className="w-4 h-4" />
                                                </div>
                                                <h3 className="text-slate-900 font-semibold text-sm">Score Simulation</h3>
                                            </div>
                                            <p className="text-slate-600 text-xs leading-relaxed">
                                                Paying off <span className="font-semibold">₹15,000</span> on your credit card could boost your score by <span className="font-bold text-green-600">+22 points</span>.
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex items-center justify-between mb-4">
                                    <h2 className="text-base font-bold text-slate-900">Score Factors</h2>
                                </div>
                                
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-6">
                                    <FactorCard title="Payment History" status={apiResponse.factors.paymentHistory.status} value={`${apiResponse.factors.paymentHistory.percentage}%`} color={apiResponse.factors.paymentHistory.color} iconName="CheckCircle" onClick={() => setSelectedFactor('paymentHistory')} />
                                    <FactorCard title="Credit Utilization" status={apiResponse.factors.creditUtilization.status} value={`${apiResponse.factors.creditUtilization.percentage}%`} color={apiResponse.factors.creditUtilization.color} iconName="PieChart" onClick={() => setSelectedFactor('creditUtilization')} />
                                    <FactorCard title="Age of Accounts" status={apiResponse.factors.creditAge.status} value={apiResponse.factors.creditAge.age} color={apiResponse.factors.creditAge.color} iconName="Clock" onClick={() => setSelectedFactor('creditAge')} />
                                    <FactorCard title="Total Accounts" status={apiResponse.factors.totalAccounts.status} value={apiResponse.factors.totalAccounts.count} color={apiResponse.factors.totalAccounts.color} iconName="CreditCard" onClick={() => setSelectedFactor('totalAccounts')} />
                                    <FactorCard title="Hard Inquiries" status={apiResponse.factors.inquiries.status} value={apiResponse.factors.inquiries.count} color={apiResponse.factors.inquiries.color} iconName="Activity" onClick={() => setSelectedFactor('inquiries')} />
                                </div>

                                <div className="flex items-center justify-between mb-3">
                                    <h2 className="text-base font-bold text-slate-900">Recommended for You</h2>
                                    <button onClick={() => handleTabChange('offers')} className="text-xs font-semibold text-brand-600 hover:text-brand-700">See all</button>
                                </div>
                                <div>
                                    {apiResponse.offers.slice(0, 1).map(offer => (
                                        <OfferCard key={offer.id} offer={offer} />
                                    ))}
                                </div>
                            </div>
                        )}

                        {selectedFactor && <FactorDetailView factorKey={selectedFactor} data={apiResponse.factors[selectedFactor]} onBack={() => setSelectedFactor(null)} />}

                        {activeTab === 'accounts' && !selectedAccount && (
                            <div className="animate-fade-in">
                                <div className="mb-5">
                                    <h1 className="text-xl font-bold text-slate-900">Active Accounts</h1>
                                    <p className="text-slate-500 text-xs mt-1">Manage your loans and credit cards. Tap for details.</p>
                                </div>
                                <div>
                                    {apiResponse.accounts.map(account => (
                                        <AccountItem key={account.id} account={account} onClick={setSelectedAccount} />
                                    ))}
                                </div>
                                <div className="mt-6 p-4 border border-dashed border-gray-300 rounded-xl text-center bg-gray-50">
                                    <p className="text-slate-500 text-xs">Found a discrepancy in your report?</p>
                                    <button className="mt-2 text-xs font-semibold text-brand-600 hover:text-brand-700">Raise a Dispute</button>
                                </div>
                            </div>
                        )}

                        {selectedAccount && <AccountDetailView account={selectedAccount} onBack={() => setSelectedAccount(null)} />}

                        {activeTab === 'offers' && !selectedAccount && (
                            <div className="animate-fade-in">
                                <div className="mb-5">
                                    <h1 className="text-xl font-bold text-slate-900">Curated Offers</h1>
                                    <p className="text-slate-500 text-xs mt-1">Personalized financial products based on your credit profile.</p>
                                </div>
                                <div className="space-y-3">
                                    {apiResponse.offers.map(offer => (
                                        <OfferCard key={offer.id} offer={offer} />
                                    ))}
                                    <div className="bg-white p-5 rounded-2xl border border-brand-100 shadow-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                                        <div>
                                            <h3 className="text-base font-bold text-slate-900 mb-1">Pre-Approved Personal Loan</h3>
                                            <p className="text-slate-500 text-xs">Unlock up to ₹5 Lakhs instantly at 10.99%.</p>
                                        </div>
                                        <button className="bg-slate-900 hover:bg-slate-800 text-white px-4 py-2 rounded-lg text-xs font-semibold transition-colors whitespace-nowrap">
                                            View Details
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'report' && !selectedAccount && <ReportView />}

                        {!isAiOpen && (
                            <button onClick={() => setIsAiOpen(true)} className="fixed bottom-6 right-6 p-4 bg-brand-600 text-white rounded-full shadow-2xl hover:bg-brand-700 hover:scale-105 transition-all z-50 flex items-center justify-center">
                                <Icon name="Sparkles" className="w-6 h-6" />
                            </button>
                        )}

                        {isAiOpen && <FinancialAssistant onClose={() => setIsAiOpen(false)} />}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OneScoreDashboard />);
    </script>
</body>
</html>

